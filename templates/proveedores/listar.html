{% extends "base.html" %}

{% block content %}

<!-- ============================================================
     LISTADO DE PROVEEDORES
     Vista encargada de mostrar proveedores activos del sistema.
     Usa la clase .vista-listar para aplicar estilos corporativos
     a encabezados y estructura de tabla.
   ============================================================ -->
<div class="vista-listar">

    <!-- T√≠tulo del m√≥dulo -->
    <h2 class="mb-4 titulo-principal">Proveedores Registrados</h2>

    <!-- Acciones superiores -->
    <div class="d-flex gap-2 mb-3">

        <!-- Crear nuevo proveedor -->
        <a href="{{ url_for('proveedores.nuevo_proveedor') }}" class="btn btn-success">
            ‚ûï Nuevo Proveedor
        </a>

        <!-- Ir a proveedores inactivos -->
        <a href="{{ url_for('proveedores.proveedores_inactivos') }}" class="btn btn-secondary">
            üóëÔ∏è Ver eliminados
        </a>

    </div>

    <!-- Tabla principal -->
    <table class="table table-bordered table-hover align-middle shadow-sm">

        <!-- Encabezado estilizado desde custom.css -->
        <thead>
            <tr>
                <th>ID</th>
                <th>Empresa</th>
                <th>Producto</th>
                <th>Direcci√≥n</th>
                <th>Tel√©fono</th>
                <th>Contacto</th>
                <th>Acciones</th>
            </tr>
        </thead>

        <!-- Cuerpo de datos -->
        <tbody>

        {% for p in proveedores %}
            <tr>

                <!-- Identificador -->
                <td class="text-center">{{ p.id_proveedor }}</td>

                <!-- Nombre de la empresa proveedora -->
                <td>{{ p.nombre_empresa }}</td>

                <!-- Producto que este proveedor abastece -->
                <td>{{ p.producto.nombre }}</td>

                <!-- Direcci√≥n registrada -->
                <td>{{ p.direccion }}</td>

                <!-- Tel√©fono de contacto -->
                <td>{{ p.telefono }}</td>

                <!-- Nombre del encargado o contacto comercial -->
                <td>{{ p.persona_contacto }}</td>

                <!-- Acciones de gesti√≥n -->
                <td class="text-center">

                    <!-- Editar proveedor -->
                    <a href="{{ url_for('proveedores.editar_proveedor', id_proveedor=p.id_proveedor) }}"
                       class="btn btn-warning btn-sm">
                        ‚úèÔ∏è Editar
                    </a>

                    <!-- Soft delete con confirmaci√≥n -->
                    <a href="{{ url_for('proveedores.eliminar_proveedor', id_proveedor=p.id_proveedor) }}"
                       class="btn btn-danger btn-sm"
                       onclick="return confirm('¬øEliminar este proveedor?');">
                        üóë Eliminar
                    </a>

                </td>

            </tr>
        {% endfor %}

        </tbody>

    </table>

</div> <!-- /.vista-listar -->

{% endblock %}
